package com.rongke.web.upload;import com.alibaba.fastjson.JSONObject;import com.rongke.commons.JsonResp;import com.rongke.enums.FileType;import com.rongke.utils.Base64Picture;import com.rongke.utils.RandomUtils;import org.apache.log4j.Logger;import org.springframework.web.bind.annotation.*;import java.io.File;import java.util.UUID;/** *  图片上传采用base64方式工具类 */@CrossOrigin@RestController@RequestMapping(value="/api/base64")public class base64UploadController {    private Logger log = Logger.getLogger(this.getClass());    /**     * @添加     * @param basejson     * @return 返回值JsonResp     */    @RequestMapping(value="/base64Upload", method = RequestMethod.POST)    public JsonResp uploadPic(@RequestBody JSONObject basejson){        log.debug("上传base64图片");        FileType fileType=FileType.OTHER;        String base64=basejson.getString("base64");        // 文件存储目录        String filePath = fileType.getAbsolutePath();        File rootFolder = new File(filePath);        if (!rootFolder.exists()) {            rootFolder.mkdirs();        }        String realFileName = UUID.randomUUID().toString()                .replaceAll("-", "");        String originalFileName = RandomUtils.randomString(6)+".jpg";        int index = originalFileName.lastIndexOf('.');        realFileName += originalFileName.substring(index);        String path=filePath + File.separator + realFileName;        Base64Picture.GenerateImage(base64,path);        String fileUrl = fileType.getFileUrl() + "/"+ realFileName;        return JsonResp.ok(fileUrl);    }}