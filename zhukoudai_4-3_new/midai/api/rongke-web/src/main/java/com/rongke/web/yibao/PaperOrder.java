package com.rongke.web.yibao;import com.rongke.utils.ans.MapUtils;import com.rongke.yibaoConfig.MerchantEnvironment;import com.rongke.yibaoConfig.YiBaoUrlEnvironment;import org.apache.log4j.Logger;import java.util.HashMap;import java.util.Map;import java.util.ResourceBundle;/** * 易宝 扣款接口 */public class PaperOrder {    private Logger log = Logger.getLogger(this.getClass());    /**     * 鉴权绑卡  第一步 统一鉴权请求     */    public static Map authbindcardrequest(String requestno,String identityid,String identitytype,String cardno,String idcardno,String idcardtype,String username,String phone,String issms,String requesttime,String authtype){        String url="/rest/v1.0/paperorder/unified/auth/request";        Map<String,String> map=new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("requestno", requestno);        map.put("identityid", identityid);        map.put("identitytype", identitytype);        map.put("cardno", cardno);        map.put("idcardno", idcardno);        map.put("idcardtype", idcardtype);        map.put("username", username);        map.put("phone", phone);        map.put("issms", issms);        map.put("requesttime", requesttime);        map.put("authtype", authtype);        Map yopresponsemap=YeepayService.yeepayYOP(map,url);        return yopresponsemap;    }    /**     * 鉴权绑卡  第二步 鉴权绑卡确认     */    public static Map<String,String> authbindcardconfirm(String requestno,String validatecode){        //String url=Config.getInstance().getValue("authbindcardconfirmUri");        String url= YiBaoUrlEnvironment.getInstance().getAuthBindCardConfirmUri();        Map<String,String> map=new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("requestno", requestno);        map.put("validatecode", validatecode);//短信验证码6位数        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return yopresponsemap;    }    /* *     * 鉴权绑卡  第三步 鉴权绑卡短信重发     */    public static Map<String,String> authbindcardresend(String requestno){        //String url=Config.getInstance().getValue("authbindcardresendUri");        String url = YiBaoUrlEnvironment.getInstance().getAuthBindCardReqUri();        Map<String,String> map=new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("requestno", requestno);        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return yopresponsemap;    }    /* *     * 鉴权记录查询     * 商户可根据绑卡请求号或者易宝流水号查询绑卡记录     */    public static Map<String,String> authrecordquery(String requestno){        //String url=Config.getInstance().getValue("authrecordqueryUri");        String url = YiBaoUrlEnvironment.getInstance().getAuthRecordQueryUri();        Map<String,String> map=new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("requestno", requestno);        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return yopresponsemap;    }    /* *     * 鉴权列表查询     * 查询用户的绑卡信息时调用，只返回有效的绑卡信息     */    public static Map<String,String> authListquery(String identityid,String identitytype){//        ResourceBundle rb=ResourceBundle.getBundle("yibaourl");//        String url=rb.getString("yibao.url.authBindCardResendUri");        String url = YiBaoUrlEnvironment.getInstance().getAuthListQueryUri();        Map<String,String> map=new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("identityid", identityid);//用户唯一标识        map.put("identitytype", identitytype);//标识类型        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return yopresponsemap;    }    /**     * 绑卡支付     * 1、调用“绑卡列表查询”接口，获取用户的有效绑卡关系列表     * 2、用户选择某个绑卡关系后，调用“有短验支付请求”接口，来获取充值短验码     * 3、用户在交互页面输入短验码后，调用“有短验充值短验确认”接口完成支付。最终支付结果将会     * 异步通知给商户。     * 4、如果用户没有收到短验码，可调用“有短验充值请求短验重发”接口重新获取     */    /* *     *     * 统一绑卡支付请求     */    public static Map<String,String> unibindcardpay(String requestno,String issms ,String identityid,String identitytype,String cardtop,String cardlast,String amount,String productname,String callbackurl,String requesttime,String terminalno  ){        String url=YiBaoUrlEnvironment.getInstance().getUniBindCardPayUri();        Map<String,String> map	=	new HashMap<String,String>();        System.out.println("requestno++++++"+requestno);        map.put("merchantno",MerchantEnvironment.getInstance().getMerchantNo());//穿透参数用于 附加参数        map.put("requestno", requestno);//还款请求号 (用的随机生成)        map.put("issms", issms);//是否发送短验* true:有短验 false:无短验(短信提醒)        map.put("identityid", identityid);//用户标识* 商户生成的用户唯一标识()        map.put("identitytype", identitytype);//用户标识类型*        map.put("cardtop", cardtop);//卡号前六位*        map.put("cardlast", cardlast);//卡号后四位*        map.put("amount", amount);//还款金额* (用户扣款多少)        map.put("productname", productname);//商品名称        map.put("callbackurl", callbackurl);//回调地址        map.put("requesttime", requesttime);//请求时间        map.put("terminalno", terminalno);//终端号* （协议支付或者代扣）        System.out.println("请求参数"+map);        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return  yopresponsemap;    }    /* *     * 绑卡支付短信确认     * 有短验模式下调用本接口回填短验并完成支付，无短验模式下不用调本接口     */    public static Map<String,String> bindcardconfirm( String requestno,String validatecode){       // String url=Config.getInstance().getValue("bindcardconfirmUri");        String url = YiBaoUrlEnvironment.getInstance().getBindCardConfirmUri();        Map<String,String> map	=	new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno")); //穿透参数        map.put("requestno", requestno);//还款请求号 商户生成的唯一充值请求号        map.put("validatecode", validatecode);//短验码        Map<String,String> yopresponsemap	=	YeepayService.yeepayYOP(map,url);        return  yopresponsemap;    }    /* *     *     * 绑卡支付短信重发     * 有短验支付模式下，若用户没有收到支付短验， 调用此接口补发支付短验。     */    public static Map<String,String>  bindcardpayresend( String requestno){       // String url=Config.getInstance().getValue("bindcardpayresendUri");        String url = YiBaoUrlEnvironment.getInstance().getBindCardPayResendUri();        Map<String,String> map	=	new HashMap<String,String>();        map.put("merchantno", Config.getInstance().getValue("merchantno"));        map.put("requestno", requestno);        Map<String,String> yopresponsemap=YeepayService.yeepayYOP(map,url);        return  yopresponsemap;    }    /* *     * 支付查询     * 商户可根据绑卡支付请求号或易宝流水号查询绑卡支付记录     */    public static Map<String,String> bindcardquery(String requestno){        String url = YiBaoUrlEnvironment.getInstance().getBindCardPayQueryUri();        Map<String, String> map = new HashMap();        map.put("merchantno", MerchantEnvironment.getInstance().getMerchantNo());        map.put("requestno", requestno);        Map<String, String> yopresponsemap = com.rongke.yibaoConfig.YeepayService.yeepayYOP(map, url);        return yopresponsemap;    }}