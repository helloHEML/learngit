<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.rongke.mapper.UserBaseMsgMapper">    <resultMap type="com.rongke.model.UserBaseMsg" id="rmUserBaseMsg">        <id property="id" column="id" />        <result property="userId" column="userId"/>        <result property="maritalStatus" column="maritalStatus"/>        <result property="education" column="education"/>        <result property="addressId" column="addressId"/>        <result property="gmtDatetime" column="gmtDatetime"/>        <result property="uptDatetime" column="uptDatetime"/>        <association property="user" javaType="com.rongke.model.User" >            <id property="id" column="user_id" />        </association>    </resultMap>    <resultMap type="com.rongke.model.UserBaseMsg" id="mUserBaseMsg">        <id property="id" column="userBaseMsg_id" />        <result property="userId" column="userBaseMsg_userId"/>        <result property="maritalStatus" column="userBaseMsg_maritalStatus"/>        <result property="education" column="userBaseMsg_education"/>        <result property="addressId" column="userBaseMsg_addressId"/>        <result property="auditorId" column="userBaseMsg_auditorId"/>        <result property="gmtDatetime" column="userBaseMsg_gmtDatetime"/>        <result property="uptDatetime" column="userBaseMsg_uptDatetime"/>        <result property="status" column="userBaseMsg_status"/>        <association property="user" javaType="com.rongke.model.User" >            <id property="id" column="userBaseMsg_userId" />            <result property="realName" column="user_realName" />            <result property="nickName" column="user_nickName" />            <result property="phone" column="user_phone" />        </association>        <association property="address" javaType="com.rongke.model.Address" >            <result property="province" column="address_province"/>            <result property="city" column="address_city"/>            <result property="area" column="address_area"/>            <result property="addressDetail" column="address_addressDetail"/>        </association>        <association property="auditor" javaType="com.rongke.model.Admin" >            <result property="name" column="admin_name"/>            <result property="loginName" column="admin_loginName"/>        </association>    </resultMap>    <resultMap id="selectByPageRMap" type="com.rongke.model.UserBaseMsg" extends="mUserBaseMsg">        <collection property="userContacts" ofType="com.rongke.model.UserContact">            <id property="id" column="user_contact_id" />            <result property="name" column="user_contact_name" />            <result property="phone" column="user_contact_phone" />            <result property="relation" column="relation" />        </collection>    </resultMap>    <sql id="mUserBaseMsgPkSql">        user_base_msg.id AS userBaseMsg_id,        user_base_msg.user_id AS userBaseMsg_userId,        user_base_msg.marital_status AS userBaseMsg_maritalStatus,        user_base_msg.education AS userBaseMsg_education,        user_base_msg.address_id AS userBaseMsg_addressId,        user_base_msg.status AS userBaseMsg_status,        user_base_msg.auditor_id AS userBaseMsg_auditorId,        user_base_msg.gmt_datetime AS userBaseMsg_gmtDatetime,        user_base_msg.upt_datetime AS userBaseMsg_uptDatetime    </sql>    <sql id="mUserBaseMsgSql">        id AS id,        user_id AS userId,        marital_status AS maritalStatus,        education AS education,        address_id AS addressId,        gmt_datetime AS gmtDatetime,        upt_datetime AS uptDatetime    </sql>    <select id="selectBaseMsg" parameterType="java.lang.String" resultMap="mUserBaseMsg">        select        <include refid="mUserBaseMsgPkSql"></include>        ,        user.real_name AS user_realName,        user.nick_name AS user_nickName,        user.phone AS user_phone,        address.province AS address_province,        address.city AS address_city,        address.area AS address_area,        address.address_detail AS address_addressDetail        from user_base_msg,user,address        WHERE user_base_msg.user_id=user.id        AND  user_base_msg.address_id=address.id        <if test="userId!=null and userId!=''">            AND user_base_msg.user_id=#{userId}        </if>    </select>    <select id="selectByPage1" parameterType="java.util.Map" resultMap="selectByPageRMap">        select        <include refid="mUserBaseMsgPkSql"></include>        ,        user.real_name AS user_realName,        user.nick_name AS user_nickName,        user.phone AS user_phone,        address.province AS address_province,        address.city AS address_city,        address.area AS address_area,        user_contact.id AS user_contact_id,        user_contact.name AS user_contact_name,        user_contact.phone AS user_contact_phone,        user_contact.relation AS relation,        address.address_detail AS address_addressDetail,        admin.name AS admin_name,        admin.login_name AS admin_loginName        from user_base_msg LEFT JOIN admin ON user_base_msg.auditor_id=admin.id,user,address,user_contact,authentication        WHERE user_base_msg.user_id=user.id        AND user_contact.`user_id`=`user`.`id`        AND  user_base_msg.address_id=address.id        AND user.id=authentication.user_id        AND user_contact.emergency_contact='紧急联系人'        AND authentication.phone_record_auth=1        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND  `user_base_msg`.`status`=#{status}        </if>        <if test="realName != null and realName != ''">            AND  user.real_name LIKE CONCAT(CONCAT('%',#{realName}),'%')        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_base_msg.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_base_msg.gmt_datetime,#{time2}) &lt;=0        </if>        ORDER BY authentication.user_base_msg_auth DESC ,user_base_msg.gmt_datetime DESC        <if test="_parameter.containsKey('pageNo')">            LIMIT ${pageNo},${pageSize}        </if>    </select>    <select id="selectByPage" parameterType="java.util.Map" resultMap="selectByPageRMap">       SELECT            user_base_msg.id AS userBaseMsg_id,            user_base_msg.user_id AS userBaseMsg_userId,            user_base_msg.marital_status AS userBaseMsg_maritalStatus,            user_base_msg.education AS userBaseMsg_education,            user_base_msg.address_id AS userBaseMsg_addressId,            user_base_msg.status AS userBaseMsg_status,            user_base_msg.auditor_id AS userBaseMsg_auditorId,            user_base_msg.gmt_datetime AS userBaseMsg_gmtDatetime,            user_base_msg.upt_datetime AS userBaseMsg_uptDatetime,            user.real_name AS user_realName,            user.nick_name AS user_nickName,            user.phone AS user_phone,            address.province AS address_province,            address.city AS address_city,            address.area AS address_area,            user_contact.id AS user_contact_id,            user_contact.name AS user_contact_name,            user_contact.phone AS user_contact_phone,            user_contact.relation AS relation,            address.address_detail AS address_addressDetail,            admin.name AS admin_name,            admin.login_name AS admin_loginName          FROM            user_base_msg            LEFT JOIN admin ON user_base_msg.auditor_id = admin.id,            user,            address,            user_contact,            authentication          WHERE user_base_msg.user_id = user.id            AND user_contact.`user_id` = user_base_msg.user_id            AND user_base_msg.address_id = address.id            AND user_contact.emergency_contact = '紧急联系人'            AND user_base_msg.user_id = authentication.user_id            AND authentication.phone_record_auth=1        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND  `user_base_msg`.`status`=#{status}        </if>        <if test="realName != null and realName != ''">            AND  user.real_name LIKE CONCAT(CONCAT('%',#{realName}),'%')        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_base_msg.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_base_msg.gmt_datetime,#{time2}) &lt;=0        </if>        <if test="adminId != null and adminId != ''">            AND  authentication.auditor_id=#{adminId}        </if>        ORDER BY CONVERT(user_base_msg.status USING gbk) ASC,user_base_msg.gmt_datetime DESC        <if test="_parameter.containsKey('pageNo')">            LIMIT ${pageNo},${pageSize}        </if>    </select>    <select id="selectMapsByPage"   parameterType="java.util.Map" resultType="java.util.Map">        SELECT        a.*        FROM        (SELECT        user_base_msg.id AS userBaseMsg_id,        user_base_msg.user_id AS userBaseMsg_userId,        user_base_msg.marital_status AS userBaseMsg_maritalStatus,        user_base_msg.education AS userBaseMsg_education,        user_base_msg.address_id AS userBaseMsg_addressId,        user_base_msg.status AS userBaseMsg_status,        user_base_msg.auditor_id AS userBaseMsg_auditorId,        user_base_msg.gmt_datetime AS userBaseMsg_gmtDatetime,        user_base_msg.upt_datetime AS userBaseMsg_uptDatetime,        user.real_name AS user_realName,        user.phone AS user_phone,        address.province AS address_province,        address.city AS address_city,        address.area AS address_area,        user_contact.id AS user_contact_id,        user_contact.name AS user_contact_name,        user_contact.phone AS user_contact_phone,        user_contact.relation AS relation,        address.address_detail AS address_addressDetail,        admin.name AS admin_name,        admin.login_name AS admin_loginName        FROM        user_base_msg        LEFT JOIN admin ON user_base_msg.auditor_id = admin.id,        user,        address,        user_contact        WHERE user_base_msg.user_id = user.id        AND user_contact.`user_id` = user_base_msg.user_id        AND user_base_msg.address_id = address.id        AND user_contact.emergency_contact = '紧急联系人'        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND  `user_base_msg`.`status`=#{status}        </if>        <if test="realName != null and realName != ''">            AND  user.real_name LIKE CONCAT(CONCAT('%',#{realName}),'%')        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_base_msg.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_base_msg.gmt_datetime,#{time2}) &lt;=0        </if>        ) a, authentication b        WHERE a.userBaseMsg_userId = b.user_id        AND b.phone_record_auth = 1        <if test="adminId != null and adminId != ''">            AND  b.auditor_id=#{adminId}        </if>        ORDER BY b.user_base_msg_auth DESC,a.userBaseMsg_gmtDatetime DESC        <if test="_parameter.containsKey('pageNo')">            LIMIT ${pageNo},${pageSize}        </if>    </select>    <select id="selectCount" parameterType="java.util.Map" resultType="java.lang.Integer">        SELECT        count(1)        FROM `user_base_msg`,`user`,authentication        WHERE user_base_msg.`user_id`=`user`.`id`        AND user.id=authentication.user_id        AND authentication.phone_record_auth=1        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND  `user_base_msg`.`status`=#{status}        </if>        <if test="realName != null and realName != ''">            AND  user.real_name LIKE CONCAT(CONCAT('%',#{realName}),'%')        </if>        <if test="adminId != null and adminId != ''">            AND  authentication.auditor_id=#{adminId}        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_base_msg.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_base_msg.gmt_datetime,#{time2}) &lt;=0        </if>    </select>    </mapper>