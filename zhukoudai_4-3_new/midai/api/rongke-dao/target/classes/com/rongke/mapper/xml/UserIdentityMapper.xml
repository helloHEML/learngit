<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.rongke.mapper.UserIdentityMapper">    <resultMap type="com.rongke.model.UserIdentity" id="rmUserIdentity">        <id property="id" column="id" />        <result property="userId" column="userId"/>        <result property="identityFront" column="identityFront"/>        <result property="identityBack" column="identityBack"/>        <result property="faceUrl" column="faceUrl"/>        <result property="identityNum" column="identityNum"/>        <result property="userName" column="userName"/>        <result property="status" column="status"/>        <result property="gmtDatetime" column="gmtDatetime"/>        <result property="uptDatetime" column="uptDatetime"/>        <association property="user" javaType="com.rongke.model.User" >            <id property="id" column="user_id" />        </association>    </resultMap>    <resultMap type="com.rongke.model.UserIdentity" id="mUserIdentity">        <id property="id" column="userIdentity_id" />        <result property="userId" column="userIdentity_userId"/>        <result property="identityFront" column="userIdentity_identityFront"/>        <result property="identityBack" column="userIdentity_identityBack"/>        <result property="faceUrl" column="userIdentity_faceUrl"/>        <result property="identityNum" column="userIdentity_identityNum"/>        <result property="userName" column="userIdentity_userName"/>        <result property="status" column="userIdentity_status"/>        <result property="gmtDatetime" column="userIdentity_gmtDatetime"/>        <result property="uptDatetime" column="userIdentity_uptDatetime"/>    </resultMap>     <resultMap id="userIdentityimpl" type="com.rongke.model.UserIdentity" extends="mUserIdentity">         <association property="user" javaType="com.rongke.model.User" >             <id property="realName" column="user_realName" />             <id property="nickName" column="user_nickName" />             <id property="phone" column="user_phone" />             <id property="status" column="user_status" />             <id property="defriendReason" column="user_defriendReason" />         </association>     </resultMap>    <sql id="mUserIdentityPkSql">        user_identity.id AS userIdentity_id,        user_identity.user_id AS userIdentity_userId,        user_identity.identity_front AS userIdentity_identityFront,        user_identity.identity_back AS userIdentity_identityBack,        user_identity.face_url AS userIdentity_faceUrl,        user_identity.identity_num AS userIdentity_identityNum,        user_identity.user_name AS userIdentity_userName,        user_identity.status AS userIdentity_status,        user_identity.gmt_datetime AS userIdentity_gmtDatetime,        user_identity.upt_datetime AS userIdentity_uptDatetime    </sql>    <sql id="mUserIdentitySql">        id AS id,        user_id AS userId,        identity_front AS identityFront,        identity_back AS identityBack,        face_url AS faceUrl,        identity_num AS identityNum,        user_name AS userName,        status AS status,        gmt_datetime AS gmtDatetime,        upt_datetime AS uptDatetime    </sql>    <select id="selectUserInentityData" parameterType="java.lang.String" resultMap="userIdentityimpl">        select        <include refid="mUserIdentityPkSql"></include>        ,        user.nick_name AS user_nickName,        user.real_name AS user_realName,        user.phone AS user_phone,        user.status AS user_status,        user.defriend_reason AS user_defriendReason        from user_identity,user        WHERE user_identity.user_id=user.id        AND  user_identity.status='使用'        <if test="userId!=null and userId!=''">            and  user_identity.user_id=#{userId}        </if>    </select>    <resultMap id="selectByPageResultMap" type="com.rongke.model.UserIdentity">        <result property="id" column="id"/>        <result property="identityFront" column="identity_front"/>        <result property="identityBack" column="identity_back"/>        <result property="faceUrl" column="face_url"/>        <result property="identityNum" column="identity_num"/>        <result property="userName" column="user_name"/>        <result property="status" column="status"/>        <result property="gmtDatetime" column="gmt_datetime"/>        <result property="uptDatetime" column="upt_datetime"/>        <association property="user" javaType="com.rongke.model.User">            <id property="id" column="user_id"/>            <result property="phone" column="phone"/>        </association>    </resultMap>    <select id="selectByPage" resultType="java.util.Map" resultMap="userIdentityimpl">        select        <include refid="mUserIdentityPkSql"></include>        ,        user.nick_name AS user_nickName,        user.real_name AS user_realName,        user.phone AS user_phone,        user.status AS user_status,        user.defriend_reason AS user_defriendReason        from user_identity,user        WHERE user_identity.user_id=user.id        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND user_identity.status=#{status}        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_identity.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_identity.gmt_datetime,#{time2}) &lt;=0        </if>        ORDER BY user_identity.gmt_datetime DESC        <if test="_parameter.containsKey('pageNo')">            LIMIT ${pageNo},${pageSize}        </if>    </select>    <select id="selectCount" parameterType="java.util.Map" resultType="java.lang.Integer">        SELECT        count(1)        FROM `user_identity`,`user`        WHERE user_identity.`user_id`=`user`.`id`        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_identity.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_identity.gmt_datetime,#{time2}) &lt;=0        </if>    </select>    <select id="selectPartByPage" resultType="java.util.Map" resultMap="userIdentityimpl">        select        <include refid="mUserIdentityPkSql"></include>        ,        user.nick_name AS user_nickName,        user.real_name AS user_realName,        user.phone AS user_phone,        user.status AS user_status,        user.defriend_reason AS user_defriendReason        from user_identity,user,authentication        WHERE user_identity.user_id=user.id        AND authentication.user_id=user.id        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND user_identity.status=#{status}        </if>        <if test="adminId != null and adminId != ''">            AND authentication.auditor_id=#{adminId}        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_identity.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_identity.gmt_datetime,#{time2}) &lt;=0        </if>        ORDER BY user_identity.gmt_datetime DESC        <if test="_parameter.containsKey('pageNo')">            LIMIT ${pageNo},${pageSize}        </if>    </select>    <select id="selectPartCount" parameterType="java.util.Map" resultType="java.lang.Integer">        SELECT        count(1)        FROM `user_identity`,`user`,authentication        WHERE user_identity.`user_id`=`user`.`id`        AND authentication.user_id=user.id        <if test="phone != null and phone != ''">            AND  `user`.`phone` LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="status != null and status != ''">            AND user_identity.status=#{status}        </if>        <if test="adminId != null and adminId != ''">            AND authentication.auditor_id=#{adminId}        </if>        <if test="time1!= null and time1!=''">            AND datediff(user_identity.gmt_datetime,#{time1}) &gt;=0        </if>        <if test="time2!= null and time2!=''">            AND datediff(user_identity.gmt_datetime,#{time2}) &lt;=0        </if>    </select>    </mapper>