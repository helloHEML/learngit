<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.rongke.mapper.AppFeedbackMapper">    <resultMap type="com.rongke.model.AppFeedback" id="mAppFeedback" autoMapping="true">        <association property="user_id" javaType="com.rongke.model.User" autoMapping="true" />    </resultMap>    <sql id="mColumnsSql">        id AS id,        user_id AS userId,        type AS type,        content AS content,        img_url AS imgUrl,        phone AS phone,        gmt_datetime AS gmtDatetime,        upt_datetime AS uptDatetime    </sql>    <sql id="appFeedback_user_Sql">        app_feedback.id AS id,        user_id AS userId,        content AS content,        img_url AS imgUrl,        user.phone AS phone,        app_feedback.gmt_datetime AS gmtDatetime,        app_feedback.upt_datetime AS uptDatetime,        real_name AS realName    </sql>    <resultMap type="com.rongke.model.AppFeedback" id="appFeedback_user_Rmap">        <id property="id" column="id" />        <result property="userId" column="userId"/>        <result property="content" column="content"/>        <result property="imgUrl" column="imgUrl"/>        <result property="phone" column="phone"/>        <result property="gmtDatetime" column="gmtDatetime"/>        <result property="uptDatetime" column="uptDatetime"/>        <association property="user" javaType="com.rongke.model.User" >            <result property="realName" column="realName" />            <result property="phone" column="phone" />        </association>    </resultMap>    <select id="selectAllFeedBackList" parameterType="map" resultMap="appFeedback_user_Rmap">        SELECT        <include refid="appFeedback_user_Sql"/>        FROM `user`,`app_feedback`        WHERE app_feedback.`user_id`=`user`.`id`        <if test="phone!= null and phone !=''">            AND `user`.phone LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="type!= null and type !=-1">            AND app_feedback.type = #{type}        </if>        LIMIT ${pageNo},${pageSize}    </select>    <select id="selectAllFeedBackTotal" parameterType="map" resultType="java.lang.Integer">        SELECT        count(1)        FROM `user`,`app_feedback`        WHERE app_feedback.`user_id`=`user`.`id`        <if test="phone!= null and phone !=''">            AND `user`.phone LIKE CONCAT(CONCAT('%',#{phone}),'%')        </if>        <if test="type!= null and type !=-1">            AND app_feedback.type = #{type}        </if>    </select>    <select id="feedBackPage"  resultType="java.util.Map">        SELECT rr.id as 'id',u.real_name as'realName',u.phone,rr.content,rr.img_url as 'img_url',rr.gmt_datetime as'gmt_datetime',rr.type,rr.status,        (case  when a.bank_card_auth=0 and a.phone_address_book_auth=0 and a.user_base_msg_auth=0 and a.phone_record_auth=0 and a.identity_auth=0 and a.taobao_auth=0        then '未认证'        when a.bank_card_auth=1 and a.phone_address_book_auth=1 and a.user_base_msg_auth=1 and a.phone_record_auth=1 and a.identity_auth=1 and a.taobao_auth=1        then '已认证'        when a.bank_card_auth=2 or a.phone_address_book_auth=2 or a.user_base_msg_auth=2 or a.phone_record_auth=2 or a.identity_auth=2 or a.taobao_auth=2        then '认证失败'        else '认证中'        end) as authStatus        FROM app_feedback rr LEFT JOIN user u on rr.user_id=u.id  LEFT JOIN  authentication a on u.id =a.user_id        <where>            ${ew.sqlSegment}        </where>        ORDER BY rr.gmt_datetime DESC    </select>    <select id="findFeedBackByUserId"   resultType="com.rongke.model.AppFeedback">        SELECT rr.content,rr.type,rr.user_id as'userId',rr.gmt_datetime as'gmtDatetime',rr.status        FROM app_feedback rr LEFT JOIN user u on rr.user_id=u.id where rr.user_id=#{0}        ORDER BY rr.gmt_datetime    </select></mapper>