<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.rongke.mapper.UserCouponMapper">    <resultMap type="com.rongke.model.UserCoupon" id="rmUserCoupon">        <id property="id" column="id" />        <result property="userId" column="userId"/>        <result property="couponId" column="couponId"/>        <result property="status" column="status"/>        <result property="pastDatetime" column="pastDatetime"/>        <result property="gmtDatetime" column="gmtDatetime"/>        <result property="uptDatetime" column="uptDatetime"/>        <result property="inviteFriendsNum" column="inviteFriendsNum"/>        <result property="totalMoney" column="totalMoney"/>        <association property="user" javaType="com.rongke.model.User" >            <id property="id" column="user_id" />        </association>        <association property="coupon" javaType="com.rongke.model.Coupon" >            <id property="id" column="coupon_id" />        </association>    </resultMap>    <resultMap type="com.rongke.model.UserCoupon" id="mUserCoupon">        <id property="id" column="userCoupon_id" />        <result property="userId" column="userCoupon_userId"/>        <result property="couponId" column="userCoupon_couponId"/>        <result property="status" column="userCoupon_status"/>        <result property="pastDatetime" column="userCoupon_pastDatetime"/>        <result property="gmtDatetime" column="userCoupon_gmtDatetime"/>        <result property="uptDatetime" column="userCoupon_uptDatetime"/>        <result property="inviteFriendsNum" column="userCoupon_inviteFriendsNum"/>        <result property="totalMoney" column="userCoupon_totalMoney"/>        <association property="user" javaType="com.rongke.model.User" >            <id property="id" column="user_id" />        </association>        <association property="coupon" javaType="com.rongke.model.Coupon" >            <id property="id" column="coupon_id" />            <result property="type" column="coupon_type" />            <result property="validityDay" column="coupon_validityDay" />            <result property="coupouName" column="coupon_coupouName" />            <result property="price" column="coupon_price" />        </association>    </resultMap>    <sql id="mUserCouponPkSql">        user_coupon.id AS userCoupon_id,        user_coupon.user_id AS userCoupon_userId,        user_coupon.coupon_id AS userCoupon_couponId,        user_coupon.status AS userCoupon_status,        user_coupon.past_datetime AS userCoupon_pastDatetime,        user_coupon.gmt_datetime AS userCoupon_gmtDatetime,        user_coupon.upt_datetime AS userCoupon_uptDatetime,        user_coupon.invite_friends_num AS userCoupon_inviteFriendsNum,        user_coupon.total_money AS userCoupon_totalMoney    </sql>    <sql id="mUserCouponSql">        id AS id,        user_id AS userId,        coupon_id AS couponId,        status AS status,        past_datetime AS pastDatetime,        gmt_datetime AS gmtDatetime,        upt_datetime AS uptDatetime,        invite_friends_num AS inviteFriendsNum,        total_money AS totalMoney    </sql>    <select id="selectUserCoupons" parameterType="java.lang.String" resultMap="mUserCoupon">        SELECT        <include refid="mUserCouponPkSql"></include>        ,        coupon.status AS coupon_status,        coupon.validity_day AS coupon_validityDay,        coupon.type AS coupon_type,        coupon.price AS coupon_price,        coupon.coupou_name AS coupon_coupouName        FROM        user_coupon,coupon        WHERE user_coupon.coupon_id=coupon.id        AND coupon.status='使用'        <if test="userId!=null and userId!=''">            and  user_coupon.user_id=#{userId}        </if>        <if test="status!=null and status!=''">            and  user_coupon.status=#{status}        </if>    </select>    </mapper>