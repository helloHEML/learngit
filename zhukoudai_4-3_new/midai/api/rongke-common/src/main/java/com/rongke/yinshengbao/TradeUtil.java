package com.rongke.yinshengbao;import com.rongke.utils.HttpClientUtil;import com.rongke.utils.Md5;import com.rongke.yinshengbao.entity.FourElementsPay;import com.rongke.yinshengbao.entity.OrderQuerySend;import net.sf.json.JSONObject;import java.util.HashMap;import java.util.Map;public class TradeUtil {	public static void main(String[] args) {		FourElementsPay fourElementsPay = new FourElementsPay();		fourElementsPay.setAccountId("");		fourElementsPay.setAmount("1.00");		fourElementsPay.setCardNo("");		fourElementsPay.setIdCardNo("");		fourElementsPay.setKey("");//		JSONObject arguJson = JSONObject.fromObject(fourElementsPay);//		System.out.println(arguJson.toString());	}	/**	 *四要素代付接口	 * @param realName  	用户姓名	 * @param phone  		电话	 * @param orderId 	 	订单id	 * @param idCardNo  	身份证号	 * @param bankCardNo  	银行卡号	 * @param amount  		打款金额	 * @return	 */	public static JSONObject FourElementsPay(String realName,String phone,String orderId,String idCardNo,String bankCardNo,String amount) throws Exception {//		FourElementsPay fourElementsPay=new FourElementsPay();		Map<String,String> configMap = readProperty();//		fourElementsPay.setAccountId(configMap.get("accountId"));//		fourElementsPay.setResponseUrl(configMap.get("reCallUrl"));//		fourElementsPay.setKey(configMap.get("key"));//		fourElementsPay.setPurpose("回租手机");//		fourElementsPay.setName(realName);//		fourElementsPay.setOrderId(orderId);//		fourElementsPay.setAmount(account);//打款金额//		fourElementsPay.setIdCardNo(idCardNo);//身份证号//		fourElementsPay.setSummary("放款");//付款摘要//		fourElementsPay.setPhoneNo(phone);//		fourElementsPay.setCardNo(bankCardNo);//银行卡号//		String dataStr = fourElementsPay.toString();//		String macStr = Md5.md5Encode(dataStr);//		fourElementsPay.setMac(macStr.toUpperCase());//		JSONObject arguJson = JSONObject.fromObject(fourElementsPay);        Map map=new HashMap();        map.put("accountId","1120180614155639001");/*configMap.get("accountId")*/        map.put("responseUrl",configMap.get("reCallUrl"));        map.put("purpose","回租手机");        map.put("name",realName);        map.put("orderId",orderId);        map.put("amount",amount);        map.put("idCardNo",idCardNo);        map.put("summary","放款");        map.put("phoneNo",phone);        map.put("cardNo",bankCardNo);        StringBuilder sb=new StringBuilder();        sb.append("accountId=").append("1120180614155639001");/*configMap.get("accountId")*/        sb.append("&name=").append(realName);        sb.append("&cardNo=").append(bankCardNo);        sb.append("&orderId=").append(orderId);        sb.append("&purpose=").append("回租手机");        sb.append("&amount=").append(amount);        sb.append("&idCardNo=").append(idCardNo);        sb.append("&summary=").append("放款");        sb.append("&phoneNo=").append(phone);        sb.append("&responseUrl=").append(configMap.get("reCallUrl"));		sb.append("&key=").append("123456abc");/*configMap.get("key")*/		System.out.print("请求参数："+sb.toString());        map.put("mac", Md5.md5Encode(sb.toString()).toUpperCase());		System.out.print("请求参数签名："+Md5.md5Encode(sb.toString()).toUpperCase());		String result = HttpClientUtil.postForm(configMap.get("fourElementsPayUrl"), map,null,10000,10000);		System.out.println(configMap.get("fourElementsPayUrl") + "  request result is " + result);		JSONObject retJson = JSONObject.fromObject(result);		return retJson;	}		public JSONObject QueryOrderStatus(OrderQuerySend orderQuerySend){		Map<String,String> configMap = readProperty();		orderQuerySend.setAccountId(configMap.get("accountId"));		String dataStr = orderQuerySend.toString();		String macStr = Md5.md5Encode(dataStr);		orderQuerySend.setMac(macStr.toUpperCase());		JSONObject arguJson = JSONObject.fromObject(orderQuerySend);		String result = HttpClientUtil.sendPostSSLRequest(configMap.get("queryOrderStatusUrl"),arguJson.toString(),HttpClientUtil.charset,"application/json");		System.out.println( configMap.get("queryOrderStatusUrl") + "  request result is " + result);		JSONObject retJson = JSONObject.fromObject(result);		return retJson;	}				public static String getRet(String retCode){		Map<String,String> dataMap = new HashMap<String, String>();		dataMap.put("0000","操作成功");		dataMap.put("1111","系统异常");		dataMap.put("1000","签名错误");		dataMap.put("1001","商户号为空");		dataMap.put("1002","目的为空");		dataMap.put("1003","金额为空");		dataMap.put("1004","金额格式错误");		dataMap.put("1005","金额大于5W");		dataMap.put("1006","卡号为空");		dataMap.put("1007","姓名为空");		dataMap.put("1009","订单号为空");		dataMap.put("1015","创建订单失败");		dataMap.put("1016","创建审核交易失败");		dataMap.put("1017","余额不足");		dataMap.put("1018","查询失败");		dataMap.put("1030","订单号重复");		dataMap.put("1031","卡号不正确");		dataMap.put("1040","签名为空");		dataMap.put("2000","该商户号不存在");		dataMap.put("2002","订单不存在");		dataMap.put("2003","代付服务未开通");		dataMap.put("2033","网络繁忙，请稍候重试");		dataMap.put("2034","未获取到卡BIN信息");		dataMap.put("2035","商户已冻结");		dataMap.put("2036","收款人身份证号为空");		dataMap.put("2037","付款人付款摘要为空");		dataMap.put("2038","收款人手机号格式错误");		dataMap.put("2039","收款人身份证号格式错误");		dataMap.put("2040","订单异常");		dataMap.put("3050","交易验重不通过");		return dataMap.get(retCode);	}		public static Map<String,String> readProperty(){		Map<String,String> retMap = new HashMap<String,String>();		try{//			Properties properties = new Properties();//			URL url=TradeUtil.class.getClassLoader().getResources("config/yop_sdk_config_default.json").nextElement();//			BufferedReader bufferedReader = new BufferedReader(new FileReader(url.getFile()));//			properties.load(bufferedReader);//			String fourElementsPayUrl = properties.getProperty("yinshengbao.fourElementsPayUrl");//			String queryOrderStatusUrl = properties.getProperty("yinshengbao.queryOrderStatusUrl");//			String reCallUrl = properties.getProperty("yinshengbao.reCallUrl");//			String queryBlanceUrl = properties.getProperty("yinshengbao.queryBlanceUrl");//			String accountId = properties.getProperty("yinshengbao.accountId");//			String key = properties.getProperty("yinshengbao.key");						retMap.put("fourElementsPayUrl", Config.getInstance().getValue("yinshengbao.fourElementsPayUrl"));			retMap.put("queryOrderStatusUrl",Config.getInstance().getValue("yinshengbao.queryOrderStatusUrl"));			retMap.put("reCallUrl",Config.getInstance().getValue("yinshengbao.reCallUrl"));			retMap.put("queryBlanceUrl",Config.getInstance().getValue("yinshengbao.queryBlanceUrl"));			retMap.put("accountId",Config.getInstance().getValue("yinshengbao.accountId"));			retMap.put("key", Config.getInstance().getValue("yinshengbao.key"));		}catch (Exception e){			System.out.println("There is an error where read the config property file . ");		}		return retMap;	} }